COMP=cray

ifeq ($(COMP),cray)
CC=cc 
FC=ftn
CCFLAGS=-g -h omp -I/appl/opt/libpng/include/libpng16
FCFLAGS=-g -h omp
LIBS=-L/appl/opt/libpng/lib -lpng16 -lz 
endif

ifeq ($(COMP),gnu)
CC=gcc
FC=gfortran
CCFLAGS=-g -fopenmp -I/appl/opt/libpng/include/libpng16
FCFLAGS=-g -fopenmp
LIBS=-L/appl/opt/libpng/lib -lpng16 -lz 
endif

ifeq ($(COMP),intel)
CC=icc
FC=ifort
CCFLAGS=-g -qopenmp  -I/appl/opt/libpng/include/libpng16
FCFLAGS=-g -qopenmp
LIBS=-L/appl/opt/libpng/lib -lpng16 -lz 
endif

EXE6a=bonus_ex6a
OBJS6a=pngwriter.o bonus_ex6a_heat.o bonus_ex6a_main.o

EXE6b=bonus_ex6b
OBJS6b=pngwriter.o bonus_ex6b_heat.o bonus_ex6b_main.o

EXES=$(EXE6a) $(EXE6b)

all: $(EXES)

# Dependencies
bonus_ex6a_main.o: pngwriter.o bonus_ex6a_heat.o bonus_ex6a_main.c
bonus_ex6b_main.o: pngwriter.o bonus_ex6b_heat.o bonus_ex6b_main.c

bonus_ex6a_heat.o: bonus_ex6a_heat.c 
bonus_ex6b_heat.o: bonus_ex6b_heat.c

$(EXE6a): $(OBJS6a) .ALWAYSEXEC
	$(CC) $(CCFLAGS) $(OBJS6a) -o $@ $(LIBS)

$(EXE6b): $(OBJS6b) .ALWAYSEXEC
	$(CC) $(CCFLAGS) $(OBJS6b) -o $@ $(LIBS)

%.o: %.c
	$(CC) $(CCFLAGS) -c $< -o $@

clean:
	-/bin/rm -f $(EXES)
	-/bin/rm -f a.out *.o *~ *.png

.ALWAYSEXEC:
